<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Laboratory Values - Nurse Success Study Hub</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='category-style.css') }}">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/static/manifest.json">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#2f61f3">
    
    <!-- PWA Specific -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Nurse Study">
    
    <!-- Apple Touch Icons - All Sizes -->
    <link rel="apple-touch-icon" href="/static/icons/icon-180.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/static/icons/icon-120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/icons/icon-152.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/static/icons/icon-167.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/icons/icon-180.png">
    
    <style>
        /* Offline indicator */
        .offline-indicator {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #ff9800, #f57c00);
            color: white;
            padding: 12px 20px;
            text-align: center;
            font-weight: 600;
            font-size: 14px;
            z-index: 10000;
        }

        .offline-indicator.hidden {
            display: none;
        }

        .back-link {
            display: inline-block;
            color: #0066cc;
            text-decoration: none;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .page-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .page-header h1 {
            margin: 0;
            font-size: 2.5em;
            color: #333;
        }

        .page-header p {
            margin: 5px 0 0 0;
            color: #666;
            font-size: 1.1em;
        }

        .header-icon {
            font-size: 2.5em;
        }

        .quiz-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .quiz-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .quiz-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .quiz-card-header {
            padding: 20px;
            color: white;
            font-size: 0.85em;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .quiz-card-header.standard {
            background: linear-gradient(135deg, #00a8e8 0%, #0099d8 100%);
        }

        .quiz-card-header.hard {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
        }

        .quiz-card-header.quick-mcq {
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
        }

        .quiz-card-header.quick-fill {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        .quiz-card-content {
            padding: 25px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .quiz-card-content h2 {
            margin: 0 0 12px 0;
            font-size: 1.6em;
            color: #333;
        }

        .quiz-card-content p {
            margin: 0 0 20px 0;
            color: #666;
            font-size: 0.95em;
            line-height: 1.5;
            flex-grow: 1;
        }

        .quiz-stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 15px 0;
            border-top: 1px solid #eee;
            border-bottom: 1px solid #eee;
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
            display: block;
        }

        .stat-label {
            font-size: 0.75em;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 5px;
        }

        .quiz-card-footer {
            padding: 20px 25px 25px;
            border-top: 1px solid #eee;
        }

        /* Quiz Controls in Card Footer */
        .quiz-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .length-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .length-label {
            font-size: 0.9em;
            font-weight: 600;
            color: #333;
        }

        .length-buttons {
            display: flex;
            gap: 0;
            flex: 1;
        }

        .length-btn {
            flex: 1;
            padding: 8px 12px;
            border: 2px solid #ddd;
            background: white;
            color: #333;
            font-size: 0.85em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }

        .length-btn:first-child {
            border-radius: 6px 0 0 6px;
        }

        .length-btn:last-child {
            border-radius: 0 6px 6px 0;
        }

        .length-btn:not(:last-child) {
            border-right: none;
        }

        .length-btn:hover:not(.active) {
            background: #f5f5f5;
            border-color: #0066cc;
        }

        .length-btn.active {
            background: #0066cc;
            color: white;
            border-color: #0066cc;
        }

        .length-btn.hard-active {
            background: #ff6b6b;
            border-color: #ff6b6b;
        }

        .btn {
            display: inline-block;
            width: 100%;
            padding: 12px 24px;
            border: 2px solid #0066cc;
            background-color: white;
            color: #0066cc;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
        }

        .btn:hover {
            background-color: #0066cc;
            color: white;
        }

        .btn-hard {
            border-color: #ff6b6b;
            color: #ff6b6b;
        }

        .btn-hard:hover {
            background-color: #ff6b6b;
            color: white;
        }

        .btn-purple {
            border-color: #7c3aed;
            color: #7c3aed;
        }

        .btn-purple:hover {
            background-color: #7c3aed;
            color: white;
        }

        .btn-orange {
            border-color: #f59e0b;
            color: #f59e0b;
        }

        .btn-orange:hover {
            background-color: #f59e0b;
            color: white;
        }

        @media (max-width: 768px) {
            .quiz-container {
                grid-template-columns: 1fr;
            }

            .page-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .page-header h1 {
                font-size: 1.8em;
            }

            .length-selector {
                flex-direction: column;
                align-items: stretch;
            }

            .length-buttons {
                width: 100%;
            }
        }
        
        /* Safe area insets for iOS PWA */
        @supports (padding-top: env(safe-area-inset-top)) {
            body {
                padding-top: env(safe-area-inset-top);
                padding-bottom: env(safe-area-inset-bottom);
                padding-left: env(safe-area-inset-left);
                padding-right: env(safe-area-inset-right);
            }
        }
    </style>
</head>
<body>
    <!-- Offline indicator -->
    <div id="offlineIndicator" class="offline-indicator hidden">
        <span>üì¥ You're offline - Using cached content</span>
    </div>

    <div class="container">
        <a href="/" class="back-link">‚Üê Nurse Success Study Hub</a>

        <div class="page-header">
            <div class="header-icon">üß™</div>
            <div>
                <h1>Laboratory Values</h1>
                <p>Master normal and abnormal lab values for NCLEX success</p>
            </div>
        </div>

        <!-- COMPREHENSIVE QUIZZES SECTION -->
        <h2 style="color: #333; margin-top: 30px; margin-bottom: 20px; font-size: 1.4em;">Comprehensive Quizzes</h2>
        <p style="color: #666; margin-bottom: 25px;">Deep study with detailed rationales - 100 questions covering all lab value categories</p>

        <div class="quiz-container">
            <!-- Multiple Choice Card -->
            <div class="quiz-card">
                <div class="quiz-card-header standard">
                    üìã STANDARD
                </div>
                <div class="quiz-card-content">
                    <h2>Multiple Choice</h2>
                    <p>Test your knowledge with 100 NCLEX-style multiple choice questions. Each question includes detailed rationales to reinforce your understanding of normal values, abnormal findings, and nursing interventions.</p>
                    <div class="quiz-stats">
                        <div class="stat">
                            <span class="stat-number">100</span>
                            <span class="stat-label">Questions</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">MCQ</span>
                            <span class="stat-label">Type</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number" id="mcqDuration">~30 min</span>
                            <span class="stat-label">Duration</span>
                        </div>
                    </div>
                </div>
                <div class="quiz-card-footer">
                    <div class="quiz-controls">
                        <div class="length-selector">
                            <span class="length-label">Quiz Length:</span>
                            <div class="length-buttons" id="mcqLengthBtns">
                                <button class="length-btn" data-length="10">10</button>
                                <button class="length-btn active" data-length="25">25</button>
                                <button class="length-btn" data-length="50">50</button>
                                <button class="length-btn" data-length="100">100</button>
                            </div>
                        </div>
                        <a href="/quiz/Lab_Values/NCLEX_Lab_Values?quiz_length=25&autostart=true&back_url=/category/Lab_Values&back_label=Lab Values" class="btn" id="mcqStartBtn">Start Quiz ‚Üí</a>
                    </div>
                </div>
            </div>

            <!-- Fill in the Blank Card -->
            <div class="quiz-card">
                <div class="quiz-card-header hard">
                    ‚úèÔ∏è HARD MODE
                </div>
                <div class="quiz-card-content">
                    <h2>Fill in the Blank</h2>
                    <p>Challenge yourself with 100 fill-in-the-blank questions that test your exact recall of laboratory values. Type your answers with no multiple choice hints!</p>
                    <div class="quiz-stats">
                        <div class="stat">
                            <span class="stat-number">100</span>
                            <span class="stat-label">Questions</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">Fill-in</span>
                            <span class="stat-label">Type</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number" id="fitbDuration">~40 min</span>
                            <span class="stat-label">Duration</span>
                        </div>
                    </div>
                </div>
                <div class="quiz-card-footer">
                    <div class="quiz-controls">
                        <div class="length-selector">
                            <span class="length-label">Quiz Length:</span>
                            <div class="length-buttons" id="fitbLengthBtns">
                                <button class="length-btn" data-length="10">10</button>
                                <button class="length-btn active" data-length="25">25</button>
                                <button class="length-btn" data-length="50">50</button>
                                <button class="length-btn" data-length="100">100</button>
                            </div>
                        </div>
                        <a href="/quiz-fill-blank/Lab_Values/NCLEX_Lab_Values_Fill_In_The_Blank?quiz_length=25&autostart=true&back_url=/category/Lab_Values&back_label=Lab Values" class="btn btn-hard" id="fitbStartBtn">Start Quiz ‚Üí</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- STUDY TIPS SECTION -->
        <div style="margin-top: 30px; margin-bottom: 30px; padding: 25px; background: #f0f9ff; border-radius: 8px; border-left: 4px solid #0099d8;">
            <h3 style="color: #0066cc; margin-top: 0;">üìö Study Tips for Lab Values</h3>
            <ul style="color: #333; line-height: 1.8;">
                <li><strong>Start with comprehensive quizzes</strong> to build deep understanding with detailed rationales</li>
                <li><strong>Use fishbone drills for quick review</strong> to reinforce lab value organization and relationships</li>
                <li><strong>Mix MCQ and fill-in modes</strong> - MCQ helps with recognition, fill-in builds recall</li>
                <li><strong>Focus on abnormal values</strong> - understand what causes increases/decreases and nursing interventions</li>
                <li><strong>Group by category</strong> - Understanding why labs are grouped (CBC, BMP, etc.) helps memory</li>
                <li><strong>Practice regularly</strong> - even 5 minutes daily with fishbone drills improves long-term retention</li>
            </ul>
        </div>

        <!-- LAB VALUES COVERED TABLE -->
        <div style="margin-bottom: 30px;">
            <h3 style="color: #333; margin-top: 0; margin-bottom: 15px; font-size: 1.1em;">üìã Lab Values Covered</h3>
            <p style="color: #666; margin-bottom: 20px;">Both quizzes comprehensively cover the following laboratory values essential for NCLEX and HESI success:</p>
            
            <div style="background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); overflow-x: auto;">
                <table style="width: 100%; border-collapse: collapse;">
                    <tbody>
                        <tr style="background: #f8f9fa; border-bottom: 2px solid #e5e7eb;">
                            <td style="padding: 15px; color: #333; font-weight: 600; border-right: 1px solid #e5e7eb;">Sodium (Na‚Å∫)</td>
                            <td style="padding: 15px; color: #333; font-weight: 600; border-right: 1px solid #e5e7eb;">Potassium (K‚Å∫)</td>
                            <td style="padding: 15px; color: #333; font-weight: 600; border-right: 1px solid #e5e7eb;">Calcium (Ca¬≤‚Å∫)</td>
                            <td style="padding: 15px; color: #333; font-weight: 600; border-right: 1px solid #e5e7eb;">Magnesium (Mg¬≤‚Å∫)</td>
                            <td style="padding: 15px; color: #333; font-weight: 600; border-right: 1px solid #e5e7eb;">Chloride (Cl‚Åª)</td>
                            <td style="padding: 15px; color: #333; font-weight: 600;">BUN</td>
                        </tr>
                        <tr style="background: white; border-bottom: 2px solid #e5e7eb;">
                            <td style="padding: 15px; color: #666; border-right: 1px solid #e5e7eb;">Creatinine</td>
                            <td style="padding: 15px; color: #666; border-right: 1px solid #e5e7eb;">Glucose</td>
                            <td style="padding: 15px; color: #666; border-right: 1px solid #e5e7eb;">Hemoglobin (Hgb)</td>
                            <td style="padding: 15px; color: #666; border-right: 1px solid #e5e7eb;">Hematocrit (Hct)</td>
                            <td style="padding: 15px; color: #666; border-right: 1px solid #e5e7eb;">WBC Count</td>
                            <td style="padding: 15px; color: #666;">Platelets</td>
                        </tr>
                        <tr style="background: #f8f9fa; border-bottom: 2px solid #e5e7eb;">
                            <td style="padding: 15px; color: #333; font-weight: 600; border-right: 1px solid #e5e7eb;">AST / ALT</td>
                            <td style="padding: 15px; color: #333; font-weight: 600; border-right: 1px solid #e5e7eb;">ALP</td>
                            <td style="padding: 15px; color: #333; font-weight: 600; border-right: 1px solid #e5e7eb;">Total Bilirubin</td>
                            <td style="padding: 15px; color: #333; font-weight: 600; border-right: 1px solid #e5e7eb;">PT / INR</td>
                            <td style="padding: 15px; color: #333; font-weight: 600; border-right: 1px solid #e5e7eb;">aPTT / PTT</td>
                            <td style="padding: 15px; color: #333; font-weight: 600;">pH</td>
                        </tr>
                        <tr style="background: white; border-bottom: 2px solid #e5e7eb;">
                            <td style="padding: 15px; color: #666; border-right: 1px solid #e5e7eb;">PaCO‚ÇÇ</td>
                            <td style="padding: 15px; color: #666; border-right: 1px solid #e5e7eb;">HCO‚ÇÉ‚Åª</td>
                            <td style="padding: 15px; color: #666; border-right: 1px solid #e5e7eb;">PaO‚ÇÇ</td>
                            <td style="padding: 15px; color: #666; border-right: 1px solid #e5e7eb;">O‚ÇÇ Saturation</td>
                            <td style="padding: 15px; color: #666; border-right: 1px solid #e5e7eb;">CO‚ÇÇ</td>
                            <td style="padding: 15px; color: #666;"></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div style="margin-top: 15px; padding: 12px; background: #fffbeb; border-left: 4px solid #f59e0b; border-radius: 4px;">
                <p style="margin: 0; color: #92400e; font-size: 0.85em;">
                    <strong>üí° Tip:</strong> The fishbone MCQ and Hard Mode quizzes focus on 25 core lab values. The comprehensive quizzes cover all values above with detailed clinical context.
                </p>
            </div>
        </div>

        <!-- QUICK DRILLS SECTION - FISHBONE QUIZZES -->
        <h2 style="color: #333; margin-top: 40px; margin-bottom: 20px; font-size: 1.4em;">Quick Drills - Fishbone Diagrams</h2>
        <p style="color: #666; margin-bottom: 25px;">Visual learning with interactive fishbone diagrams - perfect for quick review sessions</p>

        <div class="quiz-container">
            <!-- Fishbone MCQ Card -->
            <div class="quiz-card">
                <div class="quiz-card-header quick-mcq">
                    üéØ INTERACTIVE
                </div>
                <div class="quiz-card-content">
                    <h2>Fishbone Diagram Drills</h2>
                    <p><strong>Learn lab value relationships</strong> through interactive fishbone diagrams. Master how lab values are grouped by category (CBC, BMP, Liver Panel, Coagulation, ABG). Select the correct lab name for each branch and understand the visual organization of lab values.</p>
                    <div class="quiz-stats">
                        <div class="stat">
                            <span class="stat-number">5</span>
                            <span class="stat-label">Questions</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">MCQ</span>
                            <span class="stat-label">Type</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">~5 min</span>
                            <span class="stat-label">Duration</span>
                        </div>
                    </div>
                </div>
                <div class="quiz-card-footer">
                    <a href="/quiz-fishbone-mcq" class="btn btn-purple">Start Quiz ‚Üí</a>
                </div>
            </div>

            <!-- Fishbone Fill-in Card -->
            <div class="quiz-card">
                <div class="quiz-card-header quick-fill">
                    üí™ CHALLENGE
                </div>
                <div class="quiz-card-content">
                    <h2>Fishbone Diagram Drills</h2>
                    <p><strong>Expert-level drill!</strong> Type the exact lab value ranges for each lab shown in the fishbone diagram. No multiple choice hints - test your complete knowledge of normal ranges organized by category. Perfect for quick review and reinforcing lab value organization.</p>
                    <div class="quiz-stats">
                        <div class="stat">
                            <span class="stat-number">5</span>
                            <span class="stat-label">Questions</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">Fill-in</span>
                            <span class="stat-label">Type</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">~8 min</span>
                            <span class="stat-label">Duration</span>
                        </div>
                    </div>
                </div>
                <div class="quiz-card-footer">
                    <a href="/quiz-fishbone-fill" class="btn btn-orange">Start Quiz ‚Üí</a>
                </div>
            </div>
        </div>


    </div>

    <!-- PWA Utilities -->
    <script src="/static/js/pwa-utils.js"></script>

    <script>
    (function() {
        // ============================================
        // Quiz Length Selection - MCQ
        // ============================================
        
        let mcqLength = 25;
        const mcqLengthBtns = document.querySelectorAll('#mcqLengthBtns .length-btn');
        const mcqStartBtn = document.getElementById('mcqStartBtn');
        const mcqDuration = document.getElementById('mcqDuration');
        
        // Duration estimates (minutes per question)
        const mcqMinPerQ = 0.3;
        
        mcqLengthBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                mcqLengthBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                mcqLength = parseInt(btn.dataset.length, 10);
                updateMcqButton();
            });
        });
        
        function updateMcqButton() {
            const minutes = Math.round(mcqLength * mcqMinPerQ);
            mcqDuration.textContent = `~${minutes} min`;
            mcqStartBtn.href = `/quiz/Lab_Values/NCLEX_Lab_Values?quiz_length=${mcqLength}&autostart=true&back_url=/category/Lab_Values&back_label=Lab Values`;
        }
        
        // ============================================
        // Quiz Length Selection - Fill in the Blank
        // ============================================
        
        let fitbLength = 25;
        const fitbLengthBtns = document.querySelectorAll('#fitbLengthBtns .length-btn');
        const fitbStartBtn = document.getElementById('fitbStartBtn');
        const fitbDuration = document.getElementById('fitbDuration');
        
        // Duration estimates (minutes per question - FITB takes longer)
        const fitbMinPerQ = 0.4;
        
        fitbLengthBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                fitbLengthBtns.forEach(b => {
                    b.classList.remove('active');
                    b.classList.remove('hard-active');
                });
                btn.classList.add('active');
                btn.classList.add('hard-active');
                fitbLength = parseInt(btn.dataset.length, 10);
                updateFitbButton();
            });
        });
        
        function updateFitbButton() {
            const minutes = Math.round(fitbLength * fitbMinPerQ);
            fitbDuration.textContent = `~${minutes} min`;
            fitbStartBtn.href = `/quiz-fill-blank/Lab_Values/NCLEX_Lab_Values_Fill_In_The_Blank?quiz_length=${fitbLength}&autostart=true&back_url=/category/Lab_Values&back_label=Lab Values`;
        }

        // ============================================
        // Offline Indicator
        // ============================================
        
        function updateOfflineIndicator() {
            const indicator = document.getElementById('offlineIndicator');
            if (navigator.onLine) {
                indicator.classList.add('hidden');
            } else {
                indicator.classList.remove('hidden');
            }
        }

        window.addEventListener('online', updateOfflineIndicator);
        window.addEventListener('offline', updateOfflineIndicator);
        updateOfflineIndicator();
    })();
    </script>
</body>
</html>
